<app-header title="Entry Edit" />

@if(isFetching$ | async){
<app-password-entry-edit-skeleton />
} @else {

<form (submit)="onSubmit($event)" [formGroup]="passwordEntryFormGroup">
  <div>
    <input class="input-box" type="text" formControlName="entryName" placeholder="Entry Name" />
    <span class="error-message"> {{ getErrorMessage('entryName', 'Entry Name') }}</span>
  </div>

  <div>
    <input
      class="input-box"
      type="text"
      formControlName="entryUserName"
      placeholder="Username"
      autocomplete="username"
    />
    <span class="error-message"> {{ getErrorMessage('entryUserName', 'Username') }}</span>
  </div>

  <div>
    <div class="input-box password">
      <input
        type="password"
        formControlName="password"
        placeholder="Password"
        #passwordInput
        autocomplete="current-password"
      />

      <button type="button" [appRevealPassword]="passwordInput">
        <app-icon-eye
          [style]="{
            width: '2rem',
            height: '2rem',
            stroke: 'var(--secondary)',
            fill: 'none'
          }"
        />
      </button>

      <button type="button" class="open-btn" (click)="onPasswordGenerated()">
        <app-icon-password-generator
          [style]="{
          width: '2rem',
          height: '2rem',
          stroke: 'var(--secondary)',  
        }"
        />
      </button>
    </div>
    <span class="error-message"> {{ getErrorMessage('password', 'Password') }}</span>
  </div>
  <div>
    <input class="input-box" type="text" formControlName="websiteUrl" placeholder="Website URL" />
    <span class="error-message"> {{ getErrorMessage('websiteUrl', 'Website URL') }}</span>
  </div>
  <textarea class="input-box" formControlName="notes" placeholder="Notes"></textarea>

  <div class="actions">
    <button (click)="onCancel()" class="button-base button-submit hover-active-small" type="button">
      Cancel
    </button>

    <app-submit-button
      [isDisabled]="passwordEntryFormGroup.invalid && passwordEntryFormGroup.touched"
      [isLoading]="isSaving$ | async"
      buttonText="Save"
      [buttonLoadingText]="'Saving...'"
    />
  </div>
</form>

}
